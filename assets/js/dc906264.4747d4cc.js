"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9333],{7619:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>c,toc:()=>i});var a=t(4848),l=t(8453);const o={sidebar_position:3},r="Detecting Locale Code",c={id:"warlock/localization/detecting-locale-code",title:"Detecting Locale Code",description:"In a multi-language application, you may want to detect the locale code from the request headers.",source:"@site/docs/warlock/localization/detecting-locale-code.mdx",sourceDirName:"warlock/localization",slug:"/warlock/localization/detecting-locale-code",permalink:"/docs/warlock/localization/detecting-locale-code",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"warlock",previous:{title:"Localization Files",permalink:"/docs/warlock/localization/localization-files"},next:{title:"Using Translations",permalink:"/docs/warlock/localization/using-translations"}},s={},i=[{value:"When to use <code>translation-locale-code</code> header?",id:"when-to-use-translation-locale-code-header",level:2},{value:"Fetching only the current locale&#39;s value",id:"fetching-only-the-current-locales-value",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"detecting-locale-code",children:"Detecting Locale Code"}),"\n",(0,a.jsx)(n.p,{children:"In a multi-language application, you may want to detect the locale code from the request headers."}),"\n",(0,a.jsx)(n.p,{children:"Warlock tries to locate the locale code from the following sources in the same order:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"translation-locale-code"})," header."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"locale-code"})," header."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"locale"})," header."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"locale"})," query string."]}),"\n"]}),"\n",(0,a.jsxs)(n.h2,{id:"when-to-use-translation-locale-code-header",children:["When to use ",(0,a.jsx)(n.code,{children:"translation-locale-code"})," header?"]}),"\n",(0,a.jsx)(n.p,{children:"This header has a special usage, especially when working with the admin panel, for example, we are updating a category name which holds the name as an array of localized objects."}),"\n",(0,a.jsx)(n.p,{children:"But we want to return the entire array to the response and in the same time we want to translate the error messages."}),"\n",(0,a.jsxs)(n.p,{children:["In this case, the ",(0,a.jsx)(n.code,{children:"translation-locale-code"})," header will be used to translate the error messages, while the ",(0,a.jsx)(n.code,{children:"locale-code"})," header will be used to return the localized data."]}),"\n",(0,a.jsxs)(n.p,{children:["But if the ",(0,a.jsx)(n.code,{children:"locale-code"})," header is sent, then the output will be returned as a string, not an array of objects."]}),"\n",(0,a.jsx)(n.h2,{id:"fetching-only-the-current-locales-value",children:"Fetching only the current locale's value"}),"\n",(0,a.jsxs)(n.p,{children:["If ",(0,a.jsx)(n.code,{children:"locale-code"})," or ",(0,a.jsx)(n.code,{children:"locale"})," headers are found, only the value will be returned."]}),"\n",(0,a.jsx)(n.p,{children:"For example, let's say we have the following category name which is an array of localized objects:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\r\n  "name": [\r\n    {\r\n      "localeCode": "en",\r\n      "value": "Category name"\r\n    },\r\n    {\r\n      "localeCode": "ar",\r\n      "value": "\u0627\u0633\u0645 \u0627\u0644\u0642\u0633\u0645"\r\n    }\r\n  ]\r\n}\n'})}),"\n",(0,a.jsxs)(n.p,{children:["Let's define our category output which extends the base ",(0,a.jsx)(n.a,{href:"./../http/output",children:"output"})," class:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",metastring:'title="src/app/categories/output/category-output.ts"',children:'import { FinalOutput, Output } from "@warlock.js/core";\r\n\r\nexport class CategoryOutput extends Output {\r\n  /**\r\n   * Output data\r\n   */\r\n  protected output: FinalOutput = {\r\n    id: "int",\r\n    name: "localized",\r\n  };\r\n}\n'})}),"\n",(0,a.jsxs)(n.p,{children:["If ",(0,a.jsx)(n.code,{children:"locale"})," header is present in the request with value ",(0,a.jsx)(n.code,{children:"en"}),", then the output of the name will be:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\r\n  "name": "Category name"\r\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"If not present then the entire array will be returned:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\r\n  "name": [\r\n    {\r\n      "localeCode": "en",\r\n      "value": "Category name"\r\n    },\r\n    {\r\n      "localeCode": "ar",\r\n      "value": "\u0627\u0633\u0645 \u0627\u0644\u0642\u0633\u0645"\r\n    }\r\n  ]\r\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>c});var a=t(6540);const l={},o=a.createContext(l);function r(e){const n=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),a.createElement(o.Provider,{value:n},e.children)}}}]);