"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7583],{8087:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>s,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>d});var o=t(4848),c=t(8453);const a={sidebar_position:4},s="Connecting To Database",i={id:"cascade/getting-started/connecting-to-database",title:"Connecting To Database",description:"Connecting to a database is easy. You can use the connectToDatabase method to connect to a database. The connect method accepts a single argument, which is the name of the database you want to connect to.",source:"@site/docs/cascade/getting-started/connecting-to-database.mdx",sourceDirName:"cascade/getting-started",slug:"/cascade/getting-started/connecting-to-database",permalink:"/docs/cascade/getting-started/connecting-to-database",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"mongodb",previous:{title:"Installation",permalink:"/docs/cascade/getting-started/installation"},next:{title:"Queries",permalink:"/docs/category/queries"}},r={},d=[{value:"Building Url Connection",id:"building-url-connection",level:2},{value:"Using Connection Url",id:"using-connection-url",level:2},{value:"Singleton Connection",id:"singleton-connection",level:2},{value:"Creating more than one connection",id:"creating-more-than-one-connection",level:2},{value:"Once connected",id:"once-connected",level:2}];function l(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"connecting-to-database",children:"Connecting To Database"}),"\n",(0,o.jsxs)(n.p,{children:["Connecting to a database is easy. You can use the ",(0,o.jsx)(n.code,{children:"connectToDatabase"})," method to connect to a database. The ",(0,o.jsx)(n.code,{children:"connect"})," method accepts a single argument, which is the name of the database you want to connect to."]}),"\n",(0,o.jsx)(n.h2,{id:"building-url-connection",children:"Building Url Connection"}),"\n",(0,o.jsxs)(n.p,{children:["If you want to make it simple, you can easily pass the database connection url segments, which contains: ",(0,o.jsx)(n.code,{children:"host"}),", ",(0,o.jsx)(n.code,{children:"port"}),", ",(0,o.jsx)(n.code,{children:"username"}),", ",(0,o.jsx)(n.code,{children:"password"}),", and ",(0,o.jsx)(n.code,{children:"dbAuth"}),"."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:'import { connectToDatabase } from "@warlock.js/cascade";\r\n\r\nconnectToDatabase({\r\n  host: "localhost",\r\n  port: 27017,\r\n  database: "my-database",\r\n  username: "my-username",\r\n  password: "my-password",\r\n  dbAuth: "admin",\r\n});\n'})}),"\n",(0,o.jsxs)(n.p,{children:["These are the minimum configurations needed to connect to MongoDB server, but you can pass more options to the ",(0,o.jsx)(n.code,{children:"connectToDatabase"})," function that receives the same options as the ",(0,o.jsx)(n.code,{children:"MongoClient"})," instance."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",metastring:"{10,11}",children:'import { connectToDatabase } from "@warlock.js/cascade";\r\n\r\nconnectToDatabase({\r\n  host: "localhost",\r\n  port: 27017,\r\n  database: "my-database",\r\n  username: "my-username",\r\n  password: "my-password",\r\n  dbAuth: "admin",\r\n  retryWrites: true,\r\n  replicaSet: "rs0",\r\n});\n'})}),"\n",(0,o.jsx)(n.h2,{id:"using-connection-url",children:"Using Connection Url"}),"\n",(0,o.jsxs)(n.p,{children:["Alternatively, you can pass the connection url directly to the ",(0,o.jsx)(n.code,{children:"connectToDatabase"})," function."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:'import { connectToDatabase } from "@warlock.js/cascade";\r\n\r\nconnectToDatabase({\r\n  url: "mongodb://localhost:27017/my-database",\r\n  database: "my-database",\r\n});\n'})}),"\n",(0,o.jsx)(n.h2,{id:"singleton-connection",children:"Singleton Connection"}),"\n",(0,o.jsxs)(n.p,{children:["Using ",(0,o.jsx)(n.code,{children:"connectToDatabase"})," will ensure that connection is established only once ",(0,o.jsx)(n.code,{children:"Singleton Pattern"}),", and will ignore any other calls to the ",(0,o.jsx)(n.code,{children:"connectToDatabase"})," function."]}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsxs)(n.p,{children:["If you want to use multiple database, you don't need to create multiple connections, you can use the ",(0,o.jsx)(n.code,{children:"useDatabase"})," method to switch between databases."]})}),"\n",(0,o.jsx)(n.h2,{id:"creating-more-than-one-connection",children:"Creating more than one connection"}),"\n",(0,o.jsxs)(n.p,{children:["In some situations, you might need to create multiple connections per project, in that sense you can manually create a new ",(0,o.jsx)(n.code,{children:"Connection"})," instance."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:'import { Connection } from "@warlock.js/cascade";\r\n\r\nconst connection = new Connection();\r\n\r\nconnection.connect({\r\n  // same configurations as the connectToDatabase function\r\n});\n'})}),"\n",(0,o.jsx)(n.h2,{id:"once-connected",children:"Once connected"}),"\n",(0,o.jsxs)(n.p,{children:["Sometimes you want to execute a code when the connection is established, you can use the ",(0,o.jsx)(n.code,{children:"onceConnected"})," method to execute a callback when the connection is established."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:'import { onceConnected } from "@warlock.js/cascade";\r\n\r\nonceConnected(() => {\r\n  // do something\r\n});\n'})}),"\n",(0,o.jsx)(n.p,{children:"If the connection is not established yet, the callback will be added to the queue, and will be executed once the connection is established, otherwise it will be executed immediately."})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>i});var o=t(6540);const c={},a=o.createContext(c);function s(e){const n=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:s(e.components),o.createElement(a.Provider,{value:n},e.children)}}}]);