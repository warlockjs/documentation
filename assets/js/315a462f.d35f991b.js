"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2075],{8837:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>i,contentTitle:()=>u,default:()=>c,frontMatter:()=>o,metadata:()=>a,toc:()=>l});var r=n(4848),s=n(8453);const o={sidebar_position:8},u="Output",a={id:"warlock/http/output",title:"Output",description:"Outputs are classes that are used to map the models to the response body.",source:"@site/docs/warlock/http/output.mdx",sourceDirName:"warlock/http",slug:"/warlock/http/output",permalink:"/docs/warlock/http/output",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8},sidebar:"warlock",previous:{title:"Request Context",permalink:"/docs/warlock/http/request-context"},next:{title:"Restful API",permalink:"/docs/warlock/http/restful"}},i={},l=[{value:"How it works",id:"how-it-works",level:2},{value:"Creating an output",id:"creating-an-output",level:2},{value:"Outputs in Outputs",id:"outputs-in-outputs",level:3},{value:"Custom output handler",id:"custom-output-handler",level:3},{value:"Extending output",id:"extending-output",level:2},{value:"Working with output without models.",id:"working-with-output-without-models",level:3},{value:"Get value from teh resource",id:"get-value-from-teh-resource",level:3},{value:"Output from array",id:"output-from-array",level:3},{value:"Removing value from the data output",id:"removing-value-from-the-data-output",level:3},{value:"Built-in types",id:"built-in-types",level:2},{value:"Date Format",id:"date-format",level:3},{value:"Renaming output key",id:"renaming-output-key",level:3},{value:"Manually using the output class",id:"manually-using-the-output-class",level:2},{value:"Array Of Outputs",id:"array-of-outputs",level:2}];function d(t){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...t.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h1,{id:"output",children:"Output"}),"\n",(0,r.jsx)(e.p,{children:"Outputs are classes that are used to map the models to the response body."}),"\n",(0,r.jsx)(e.h2,{id:"how-it-works",children:"How it works"}),"\n",(0,r.jsx)(e.p,{children:"When we return a response from a controller, we send the model instance, for example the user model will be sent to the user."}),"\n",(0,r.jsxs)(e.p,{children:["As mentioned in ",(0,r.jsx)(e.a,{href:"./response#sending-custom-objects-to-response",children:"Sending Custom Objects"})," the response parser does not know what data will be sent from the model, this were Outputs come in handy."]}),"\n",(0,r.jsxs)(e.p,{children:["So the output takes a ",(0,r.jsx)(e.code,{children:"resource"})," which could be an instance of a model, or a plain object. then when the response parser start parsing the body, the output class will return the ",(0,r.jsx)(e.code,{children:"response data"})," which is the final output that will be sent to the client."]}),"\n",(0,r.jsx)(e.h2,{id:"creating-an-output",children:"Creating an output"}),"\n",(0,r.jsxs)(e.p,{children:["Create inside ",(0,r.jsx)(e.code,{children:"src/users/output"})," a file and name it ",(0,r.jsx)(e.code,{children:"user-output.ts"})," with the following content"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",metastring:'title="src/users/output/user-output.ts"',children:'import { FinalOutput, Output, UploadOutput } from "@warlock.js/core";\r\n\r\nexport class UserOutput extends Output {\r\n  /**\r\n   * Output data\r\n   */\r\n  protected output: FinalOutput = {\r\n    id: "int",\r\n    name: "string",\r\n    email: "string",\r\n    age: "number",\r\n  };\r\n}\n'})}),"\n",(0,r.jsx)(e.p,{children:"the output class does not really have to much to do, it just ensures that the output data is sent in the correct format."}),"\n",(0,r.jsx)(e.p,{children:"Now let's update our user model class to link it with the user output"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",metastring:'{12,23} title="src/users/models/user/user.ts"',children:'import {\r\n  castEmail,\r\n  castModel,\r\n  Casts,\r\n  CustomCasts,\r\n  Document,\r\n  expiresAfter,\r\n  oneOf,\r\n} from "@warlock.js/cascade";\r\nimport { Auth, uploadable } from "@warlock.js/core";\r\nimport castPassword from "app/users/utils/cast-password";\r\nimport UserOutput from "../../output/user-output";\r\n\r\nexport class User extends Auth {\r\n  /**\r\n   * Collection name\r\n   */\r\n  public static collection = "users";\r\n\r\n  /**\r\n   * Output handler\r\n   */\r\n  public static output = UserOutput;\r\n\r\n  /**\r\n   * {@inheritDoc}\r\n   */\r\n  protected casts: Casts = {\r\n    name: "string",\r\n    gender: "string",\r\n    image: uploadable,\r\n    email: castEmail,\r\n  };\r\n}\n'})}),"\n",(0,r.jsxs)(e.p,{children:["In the previous model class, we added a static property called ",(0,r.jsx)(e.code,{children:"output"})," and set it to the ",(0,r.jsx)(e.code,{children:"UserOutput"})," class."]}),"\n",(0,r.jsxs)(e.p,{children:["Now whenever an instance of the model is sent to the response, the data of the model will be transformed using the ",(0,r.jsx)(e.code,{children:"UserOutput"})," class."]}),"\n",(0,r.jsx)(e.h3,{id:"outputs-in-outputs",children:"Outputs in Outputs"}),"\n",(0,r.jsxs)(e.p,{children:["Let's take this scenario, a post has a ",(0,r.jsx)(e.code,{children:"author"})," object which is an embedded document for the user,\r\nand we want to send the post with the author data."]}),"\n",(0,r.jsx)(e.p,{children:"Let's see how we can do this."}),"\n",(0,r.jsx)(e.p,{children:"First we need to create a new output class for the post, and add the author output to it."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",metastring:'title="src/posts/output/post-output.ts"',children:'import { FinalOutput, Output } from "@warlock.js/core";\r\nimport { UserOutput } from "app/users/output/user-output";\r\n\r\nexport class PostOutput extends Output {\r\n  /**\r\n   * Output data\r\n   */\r\n  protected output: FinalOutput = {\r\n    id: "int",\r\n    title: "string",\r\n    content: "string",\r\n    author: UserOutput,\r\n  };\r\n}\n'})}),"\n",(0,r.jsx)(e.p,{children:"Now let's create a new post model class and link it with the post output"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",metastring:'{12,23} title="src/posts/models/post/post.ts"',children:'import { castModel, Casts, Document } from "@warlock.js/cascade";\r\nimport { Model, uploadable } from "@warlock.js/core";\r\nimport { User } from "app/users/models/user/user";\r\n\r\nexport class Post extends Model {\r\n  /**\r\n   * Collection name\r\n   */\r\n  public static collection = "posts";\r\n\r\n  /**\r\n   * Output handler\r\n   */\r\n  public static output = PostOutput;\r\n\r\n  /**\r\n   * {@inheritDoc}\r\n   */\r\n  protected casts: Casts = {\r\n    title: "string",\r\n    content: "string",\r\n    author: castModel(User),\r\n  };\r\n}\n'})}),"\n",(0,r.jsx)(e.p,{children:"Now the post has title, content and the embedded data of the author."}),"\n",(0,r.jsx)(e.p,{children:"Let's create a new post"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",metastring:'title="src/posts/controllers/create-post.ts"',children:'import { Request, Response } from "@warlock.js/core";\r\nimport { Post } from "../models/post/post";\r\nimport { User } from "app/users/models/user";\r\n\r\nexport async function createPost(request: Request, response: Response) {\r\n  const user = await User.find(request.input("authorId"));\r\n\r\n  if (!user) {\r\n    return response.notFound();\r\n  }\r\n\r\n  const post = new Post({\r\n    title: request.input("title"),\r\n    content: request.input("content"),\r\n    user,\r\n  });\r\n\r\n  await post.save();\r\n\r\n  return response.success({\r\n    post,\r\n  });\r\n}\n'})}),"\n",(0,r.jsxs)(e.p,{children:["Now the post will be returned, the ",(0,r.jsx)(e.code,{children:"castModel"})," in the post model will set the embedded data of the user into the post's author field so the post data in database will look like:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\r\n  "id": 1,\r\n  "title": "Post title",\r\n  "content": "Post content",\r\n  "author": {\r\n    "id": 1,\r\n    "image": {\r\n      "path": "users/1/image.png"\r\n    },\r\n    "name": "User name",\r\n    "email": "my-email@gmail.com"\r\n  }\r\n}\n'})}),"\n",(0,r.jsxs)(e.p,{children:["Thanks to the ",(0,r.jsx)(e.code,{children:"PostOutput"})," only the needed data will be sent to the response."]}),"\n",(0,r.jsxs)(e.p,{children:["But as you can see in the previous example, the post's author has an image, but we didn't define it yet in the user output, most of the time the image is an instance of ",(0,r.jsx)(e.code,{children:"Upload"})," model, which already is built in inside Warlock and has as well ",(0,r.jsx)(e.code,{children:"UploadOutput"})," class."]}),"\n",(0,r.jsx)(e.p,{children:"Let's update the user output to include the image"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",metastring:'{12,23} title="src/users/output/user-output.ts"',children:'import { FinalOutput, Output, UploadOutput } from "@warlock.js/core";\r\n\r\nexport class UserOutput extends Output {\r\n  /**\r\n   * Output data\r\n   */\r\n  protected output: FinalOutput = {\r\n    id: "int",\r\n    name: "string",\r\n    email: "string",\r\n    age: "number",\r\n    image: UploadOutput,\r\n  };\r\n}\n'})}),"\n",(0,r.jsx)(e.p,{children:"Now the image will be sent to the response as well."}),"\n",(0,r.jsxs)(e.p,{children:["But since the embedded data doesn't include the user ",(0,r.jsx)(e.code,{children:"age"})," then it will not be returned."]}),"\n",(0,r.jsx)(e.h3,{id:"custom-output-handler",children:"Custom output handler"}),"\n",(0,r.jsx)(e.p,{children:"We can also define a method in the output class to handle the output data."}),"\n",(0,r.jsx)(e.p,{children:"Let's take this scenario, we want to return the user's full name instead of the first name only."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",metastring:'title="src/users/output/user-output.ts"',children:'import { FinalOutput, Output, UploadOutput } from "@warlock.js/core";\r\n\r\nexport class UserOutput extends Output {\r\n  /**\r\n   * Output data\r\n   */\r\n  protected output: FinalOutput = {\r\n    id: "int",\r\n    email: "string",\r\n    age: "number",\r\n    fullName: this.handleFullName,\r\n  };\r\n\r\n  /**\r\n   * Get the full name\r\n   */\r\n  public handleFullName() {\r\n    return this.get("firstName") + " " + this.get("lastName");\r\n  }\r\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"extending-output",children:"Extending output"}),"\n",(0,r.jsxs)(e.p,{children:["When the application grows, it gets complicated, so we may face a situation where we need to add a new field to the output, but it requires more than just a simple output key, this where ",(0,r.jsx)(e.code,{children:"extend"})," method comes in handy."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",metastring:'title="src/users/output/user-output.ts"',children:'import { FinalOutput, Output, UploadOutput } from "@warlock.js/core";\r\n\r\nexport class UserOutput extends Output {\r\n  /**\r\n   * Output data\r\n   */\r\n  protected output: FinalOutput = {\r\n    id: "int",\r\n    email: "string",\r\n    age: "number",\r\n    fullName: this.handleFullName,\r\n  };\r\n\r\n  /**\r\n   * Get the full name\r\n   */\r\n  public handleFullName() {\r\n    return this.get("firstName") + " " + this.get("lastName");\r\n  }\r\n\r\n  /**\r\n   * Extend the output\r\n   */\r\n  protected async extend() {\r\n    if (this.get("id") === 1) {\r\n      this.set("isAdmin", true);\r\n    }\r\n  }\r\n}\n'})}),"\n",(0,r.jsxs)(e.p,{children:["We made a check to see if the user id is 1, then we set the ",(0,r.jsx)(e.code,{children:"isAdmin"})," field to true."]}),"\n",(0,r.jsx)(e.h3,{id:"working-with-output-without-models",children:"Working with output without models."}),"\n",(0,r.jsx)(e.p,{children:"Let's see how it works without a model"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",metastring:'title="src/users/controllers/get-user.ts"',children:'import { Request, Response } from "@warlock.js/core";\r\nimport { UserOutput } from "../output/user-output";\r\n\r\nexport async function getUser(request: Request, response: Response) {\r\n  const user = {\r\n    id: 1,\r\n    firstName: "John",\r\n    lastName: "Doe",\r\n  };\r\n\r\n  const output = new UserOutput(user);\r\n\r\n  return response.success({\r\n    user: output,\r\n  });\r\n}\n'})}),"\n",(0,r.jsxs)(e.p,{children:["As you can see, the output class can take a plain object, or an instance of a model, they both are called ",(0,r.jsx)(e.code,{children:"output resource"}),"."]}),"\n",(0,r.jsx)(e.h3,{id:"get-value-from-teh-resource",children:"Get value from teh resource"}),"\n",(0,r.jsxs)(e.p,{children:["In our previous user output, we used ",(0,r.jsx)(e.code,{children:"get"})," method to get the value from the passed ",(0,r.jsx)(e.code,{children:"resource"}),", this allows us to get any value from the given resource using dot notation."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",metastring:'{29} title="src/users/output/user-output.ts"',children:'import { FinalOutput, Output, UploadOutput } from "@warlock.js/core";\r\n\r\nexport class UserOutput extends Output {\r\n  /**\r\n   * Output data\r\n   */\r\n  protected output: FinalOutput = {\r\n    id: "int",\r\n    email: "string",\r\n    age: "number",\r\n    fullName: this.handleFullName,\r\n  };\r\n\r\n  /**\r\n   * Get the full name\r\n   */\r\n  public handleFullName() {\r\n    return this.get("firstName") + " " + this.get("lastName");\r\n  }\r\n\r\n  /**\r\n   * Extend the output\r\n   */\r\n  protected async extend() {\r\n    if (this.get("id") === 1) {\r\n      this.set("isAdmin", true);\r\n    }\r\n\r\n    this.set("address", this.get("location.address"));\r\n  }\r\n}\n'})}),"\n",(0,r.jsxs)(e.p,{children:["And of course the ",(0,r.jsx)(e.code,{children:"set"})," method is to set a value to the output data that will be sent to the response."]}),"\n",(0,r.jsx)(e.h3,{id:"output-from-array",children:"Output from array"}),"\n",(0,r.jsxs)(e.p,{children:["If the data is stored in array, using ",(0,r.jsx)(e.code,{children:"UserOutput.collect"})," static method will return an array of output resources."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",metastring:'title="src/users/controllers/get-users.ts"',children:'import { Request, Response } from "@warlock.js/core";\r\nimport { UserOutput } from "../output/user-output";\r\n\r\nexport async function getUsers(request: Request, response: Response) {\r\n  const users = [\r\n    {\r\n      id: 1,\r\n      firstName: "John",\r\n      lastName: "Doe",\r\n    },\r\n    {\r\n      id: 2,\r\n      firstName: "Jane",\r\n      lastName: "Doe",\r\n    },\r\n  ];\r\n\r\n  const output = UserOutput.collect(users);\r\n\r\n  return response.success({\r\n    users: output,\r\n  });\r\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"removing-value-from-the-data-output",children:"Removing value from the data output"}),"\n",(0,r.jsxs)(e.p,{children:["To remove a value from the response data, use ",(0,r.jsx)(e.code,{children:"remove"})," method."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",metastring:'title="src/users/output/user-output.ts"',children:'import {\r\n  requestContext,\r\n  FinalOutput,\r\n  Output,\r\n  UploadOutput,\r\n} from "@warlock.js/core";\r\n\r\nexport class UserOutput extends Output {\r\n  /**\r\n   * Output data\r\n   */\r\n  protected output: FinalOutput = {\r\n    id: "int",\r\n    email: "string",\r\n    age: "number",\r\n    fullName: this.handleFullName,\r\n    salary: "float",\r\n  };\r\n\r\n  /**\r\n   * Get the full name\r\n   */\r\n  public handleFullName() {\r\n    return this.get("firstName") + " " + this.get("lastName");\r\n  }\r\n\r\n  /**\r\n   * Extend the output\r\n   */\r\n  protected async extend() {\r\n    if (this.get("id") === 1) {\r\n      this.set("isAdmin", true);\r\n    }\r\n\r\n    this.set("address", this.get("location.address"));\r\n\r\n    this.remove("location");\r\n\r\n    const { user } = requestContext();\r\n\r\n    // show salary only for admins\r\n    if (!user || user.get("isAdmin") === false) {\r\n      this.remove("salary");\r\n    }\r\n  }\r\n}\n'})}),"\n",(0,r.jsx)(e.p,{children:"In this example, we got the user object from the request context, and we checked if the user is admin or not, if not we removed the salary from the output data."}),"\n",(0,r.jsx)(e.h2,{id:"built-in-types",children:"Built-in types"}),"\n",(0,r.jsx)(e.p,{children:"Warlock has some built-in types that can be used in the output class."}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"int"}),": integer number."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"float"}),": float number."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"number"}),": Integer or float number based on the value."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"string"}),": string."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"boolean | bool"}),": boolean."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"date"}),": date."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"array"}),": Makes sure the returned value is an array."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"object"}),": Makes sure the returned value is an object."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"localized"}),": Makes sure the returned value is a string contains the value against the current locale code, ",(0,r.jsx)(e.a,{href:"./../localization/detecting-locale-code",children:"Read more about localization detection from localization section"}),"."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"location"}),": It will parse MongoDB ",(0,r.jsx)(e.a,{href:"https://www.mongodb.com/docs/manual/reference/geojson/#point/",children:"GeoJSON"})," object and return the latitude and longitude. in ",(0,r.jsx)(e.code,{children:"{ lat, lng }"})," format."]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"date-format",children:"Date Format"}),"\n",(0,r.jsx)(e.p,{children:"When dealing with date objects, Warlock will format it in multiple formats, so for each date object is sent to the output, the response shape will be like this:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\r\n  "createdAt": {\r\n    "format": "13-07-2023 07:36:31 AM",\r\n    "timestamp": 1689222991000,\r\n    "humanTime": "4 months ago",\r\n    "text": "July 13, 2023 at 7:36:31 AM",\r\n    "date": "July 13, 2023"\r\n  }\r\n}\n'})}),"\n",(0,r.jsx)(e.p,{children:"This give the client developer (Web or mobile apps) the ability to use the date in the format they want."}),"\n",(0,r.jsxs)(e.p,{children:["To customize the format of the ",(0,r.jsx)(e.code,{children:"format"})," you can override it in the output class by defining ",(0,r.jsx)(e.code,{children:"dateFormat"})," property:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",metastring:'title="src/users/output/user-output.ts"',children:'import { FinalOutput, Output, UploadOutput } from "@warlock.js/core";\r\n\r\nexport class UserOutput extends Output {\r\n  //...\r\n  protected dateFormat = "DD-MM-YYYY";\r\n}\n'})}),"\n",(0,r.jsx)(e.admonition,{type:"note",children:(0,r.jsxs)(e.p,{children:["Date format is being transformed using ",(0,r.jsx)(e.a,{href:"https://day.js.org/docs/en/display/format",children:"Day.js"})," library."]})}),"\n",(0,r.jsx)(e.h3,{id:"renaming-output-key",children:"Renaming output key"}),"\n",(0,r.jsxs)(e.p,{children:["If we want to send another key instead of the original key in the resource, add the returning key to the response as the key, and the value will be an array contains two values, the first value will be the key that will be taken from the ",(0,r.jsx)(e.code,{children:"resource"})," and the second value will be the format."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",metastring:'{11} title="src/users/output/user-output.ts"',children:'import { FinalOutput, Output, UploadOutput } from "@warlock.js/core";\r\n\r\nexport class UserOutput extends Output {\r\n  /**\r\n   * Output data\r\n   */\r\n  protected output: FinalOutput = {\r\n    id: "int",\r\n    email: "string",\r\n    age: "number",\r\n    salary: ["monthlySalary", "float"],\r\n  };\r\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"manually-using-the-output-class",children:"Manually using the output class"}),"\n",(0,r.jsx)(e.p,{children:"It's not just related to Warlock response, you can use it to filter the given data and be sent in a certain format based on the output data."}),"\n",(0,r.jsx)(e.p,{children:"In that sense, you can use it in any place in your application."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",metastring:'title="src/users/controllers/get-user.ts"',children:'import { UserOutput } from "../output/user-output";\r\n\r\nasync function main() {\r\n  const userOutput = new UserOutput({\r\n    id: 1,\r\n    firstName: "John",\r\n    lastName: "Doe",\r\n    age: new Date().getFullYear() - 1990,\r\n  });\r\n\r\n  const output = await userOutput.toJSON();\r\n}\r\n\r\nmain();\n'})}),"\n",(0,r.jsx)(e.h2,{id:"array-of-outputs",children:"Array Of Outputs"}),"\n",(0,r.jsxs)(e.p,{children:["In some scenarios, there is a field where it holds a list of objects, each object may point to an output, for example, a product output may have a list of ",(0,r.jsx)(e.code,{children:"options"})," where each option has an ",(0,r.jsx)(e.code,{children:"option"})," object and a ",(0,r.jsx)(e.code,{children:"value"})," object that are taken from ",(0,r.jsx)(e.code,{children:"options"})," and ",(0,r.jsx)(e.code,{children:"optionValues"})," models/outputs, so in this case we need to use ",(0,r.jsx)(e.code,{children:"arrayOf"})," method to map the ",(0,r.jsx)(e.code,{children:"product options"})," to the ",(0,r.jsx)(e.code,{children:"option"})," and ",(0,r.jsx)(e.code,{children:"option value"})," outputs."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",metastring:'title="src/products/output/product-output.ts"',children:'import { FinalOutput, Output, UploadOutput } from "@warlock.js/core";\r\nimport { OptionOutput } from "app/options/output/option-output";\r\nimport { OptionValueOutput } from "app/options/output/option-value-output";\r\n\r\nexport class ProductOutput extends Output {\r\n  /**\r\n   * Output data\r\n   */\r\n  protected output: FinalOutput = {\r\n    id: "int",\r\n    title: "string",\r\n    options: this.arrayOf({\r\n      option: OptionOutput,\r\n      value: OptionValueOutput,\r\n    }),\r\n  };\r\n}\n'})})]})}function c(t={}){const{wrapper:e}={...(0,s.R)(),...t.components};return e?(0,r.jsx)(e,{...t,children:(0,r.jsx)(d,{...t})}):d(t)}},8453:(t,e,n)=>{n.d(e,{R:()=>u,x:()=>a});var r=n(6540);const s={},o=r.createContext(s);function u(t){const e=r.useContext(o);return r.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function a(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(s):t.components||s:u(t.components),r.createElement(o.Provider,{value:e},t.children)}}}]);