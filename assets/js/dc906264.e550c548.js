"use strict";(self.webpackChunkmongez_docs=self.webpackChunkmongez_docs||[]).push([[9333],{7020:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>c,toc:()=>s});var r=t(4848),o=t(5680);const a={sidebar_position:3},l="Detecting Locale Code",c={id:"warlock/localization/detecting-locale-code",title:"Detecting Locale Code",description:"In a multi-language application, you may want to detect the locale code from the request headers.",source:"@site/docs/warlock/localization/detecting-locale-code.mdx",sourceDirName:"warlock/localization",slug:"/warlock/localization/detecting-locale-code",permalink:"/docs/warlock/localization/detecting-locale-code",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"warlock",previous:{title:"Localization Files",permalink:"/docs/warlock/localization/localization-files"},next:{title:"Using Translations",permalink:"/docs/warlock/localization/using-translations"}},i={},s=[{value:"When to use <code>translation-locale-code</code> header?",id:"when-to-use-translation-locale-code-header",level:2},{value:"Fetching only the current locale&#39;s value",id:"fetching-only-the-current-locales-value",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.RP)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"detecting-locale-code",children:"Detecting Locale Code"}),"\n",(0,r.jsx)(n.p,{children:"In a multi-language application, you may want to detect the locale code from the request headers."}),"\n",(0,r.jsx)(n.p,{children:"Warlock tries to locate the locale code from the following sources in the same order:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"translation-locale-code"})," header."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"locale-code"})," header."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"locale"})," header."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"locale"})," query string."]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"when-to-use-translation-locale-code-header",children:["When to use ",(0,r.jsx)(n.code,{children:"translation-locale-code"})," header?"]}),"\n",(0,r.jsx)(n.p,{children:"This header has a special usage, especially when working with the admin panel, for example, we are updating a category name which holds the name as an array of localized objects."}),"\n",(0,r.jsx)(n.p,{children:"But we want to return the entire array to the response and in the same time we want to translate the error messages."}),"\n",(0,r.jsxs)(n.p,{children:["In this case, the ",(0,r.jsx)(n.code,{children:"translation-locale-code"})," header will be used to translate the error messages, while the ",(0,r.jsx)(n.code,{children:"locale-code"})," header will be used to return the localized data."]}),"\n",(0,r.jsxs)(n.p,{children:["But if the ",(0,r.jsx)(n.code,{children:"locale-code"})," header is sent, then the output will be returned as a string, not an array of objects."]}),"\n",(0,r.jsx)(n.h2,{id:"fetching-only-the-current-locales-value",children:"Fetching only the current locale's value"}),"\n",(0,r.jsxs)(n.p,{children:["If ",(0,r.jsx)(n.code,{children:"locale-code"})," or ",(0,r.jsx)(n.code,{children:"locale"})," headers are found, only the value will be returned."]}),"\n",(0,r.jsx)(n.p,{children:"For example, let's say we have the following category name which is an array of localized objects:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\r\n  "name": [\r\n    {\r\n      "localeCode": "en",\r\n      "value": "Category name"\r\n    },\r\n    {\r\n      "localeCode": "ar",\r\n      "value": "\u0627\u0633\u0645 \u0627\u0644\u0642\u0633\u0645"\r\n    }\r\n  ]\r\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Let's define our category output which extends the base ",(0,r.jsx)(n.a,{href:"./../http/output",children:"output"})," class:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="src/app/categories/output/category-output.ts"',children:'import { FinalOutput, Output } from "@warlock.js/core";\r\n\r\nexport class CategoryOutput extends Output {\r\n  /**\r\n   * Output data\r\n   */\r\n  protected output: FinalOutput = {\r\n    id: "int",\r\n    name: "localized",\r\n  };\r\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["If ",(0,r.jsx)(n.code,{children:"locale"})," header is present in the request with value ",(0,r.jsx)(n.code,{children:"en"}),", then the output of the name will be:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\r\n  "name": "Category name"\r\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"If not present then the entire array will be returned:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\r\n  "name": [\r\n    {\r\n      "localeCode": "en",\r\n      "value": "Category name"\r\n    },\r\n    {\r\n      "localeCode": "ar",\r\n      "value": "\u0627\u0633\u0645 \u0627\u0644\u0642\u0633\u0645"\r\n    }\r\n  ]\r\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,o.RP)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},5680:(e,n,t)=>{t.d(n,{RP:()=>s});var r=t(6540);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var i=r.createContext({}),s=function(e){var n=r.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},h=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,i=e.parentName,h=c(e,["components","mdxType","originalType","parentName"]),u=s(t),p=o,j=u["".concat(i,".").concat(p)]||u[p]||d[p]||a;return t?r.createElement(j,l(l({ref:n},h),{},{components:t})):r.createElement(j,l({ref:n},h))}));h.displayName="MDXCreateElement"}}]);