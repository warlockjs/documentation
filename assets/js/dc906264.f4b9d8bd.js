"use strict";(self.webpackChunkmongez_docs=self.webpackChunkmongez_docs||[]).push([[6466],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>h});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=a.createContext({}),u=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},s=function(e){var t=u(e.components);return a.createElement(c.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,l=e.originalType,c=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),p=u(n),m=o,h=p["".concat(c,".").concat(m)]||p[m]||d[m]||l;return n?a.createElement(h,r(r({ref:t},s),{},{components:n})):a.createElement(h,r({ref:t},s))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var l=n.length,r=new Array(l);r[0]=m;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i[p]="string"==typeof e?e:o,r[1]=i;for(var u=2;u<l;u++)r[u]=n[u];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},6203:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>d,frontMatter:()=>l,metadata:()=>i,toc:()=>u});var a=n(7462),o=(n(7294),n(3905));const l={sidebar_position:3},r="Detecting Locale Code",i={unversionedId:"warlock/localization/detecting-locale-code",id:"warlock/localization/detecting-locale-code",title:"Detecting Locale Code",description:"In a multi-language application, you may want to detect the locale code from the request headers.",source:"@site/docs/warlock/localization/detecting-locale-code.mdx",sourceDirName:"warlock/localization",slug:"/warlock/localization/detecting-locale-code",permalink:"/documentation/docs/warlock/localization/detecting-locale-code",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"warlock",previous:{title:"Localization Files",permalink:"/documentation/docs/warlock/localization/localization-files"},next:{title:"Using Translations",permalink:"/documentation/docs/warlock/localization/using-translations"}},c={},u=[{value:"When to use <code>translation-locale-code</code> header?",id:"when-to-use-translation-locale-code-header",level:2},{value:"Fetching only the current locale&#39;s value",id:"fetching-only-the-current-locales-value",level:2}],s={toc:u},p="wrapper";function d(e){let{components:t,...n}=e;return(0,o.kt)(p,(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"detecting-locale-code"},"Detecting Locale Code"),(0,o.kt)("p",null,"In a multi-language application, you may want to detect the locale code from the request headers."),(0,o.kt)("p",null,"Warlock tries to locate the locale code from the following sources in the same order:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"translation-locale-code")," header."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"locale-code")," header."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"locale")," header."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"locale")," query string.")),(0,o.kt)("h2",{id:"when-to-use-translation-locale-code-header"},"When to use ",(0,o.kt)("inlineCode",{parentName:"h2"},"translation-locale-code")," header?"),(0,o.kt)("p",null,"This header has a special usage, especially when working with the admin panel, for example, we are updating a category name which holds the name as an array of localized objects."),(0,o.kt)("p",null,"But we want to return the entire array to the response and in the same time we want to translate the error messages."),(0,o.kt)("p",null,"In this case, the ",(0,o.kt)("inlineCode",{parentName:"p"},"translation-locale-code")," header will be used to translate the error messages, while the ",(0,o.kt)("inlineCode",{parentName:"p"},"locale-code")," header will be used to return the localized data."),(0,o.kt)("p",null,"But if the ",(0,o.kt)("inlineCode",{parentName:"p"},"locale-code")," header is sent, then the output will be returned as a string, not an array of objects."),(0,o.kt)("h2",{id:"fetching-only-the-current-locales-value"},"Fetching only the current locale's value"),(0,o.kt)("p",null,"If ",(0,o.kt)("inlineCode",{parentName:"p"},"locale-code")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"locale")," headers are found, only the value will be returned."),(0,o.kt)("p",null,"For example, let's say we have the following category name which is an array of localized objects:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "name": [\n    {\n      "localeCode": "en",\n      "value": "Category name"\n    },\n    {\n      "localeCode": "ar",\n      "value": "\u0627\u0633\u0645 \u0627\u0644\u0642\u0633\u0645"\n    }\n  ]\n}\n')),(0,o.kt)("p",null,"Let's define our category output which extends the base ",(0,o.kt)("a",{parentName:"p",href:"./../http/output"},"output")," class:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/app/categories/output/category-output.ts"',title:'"src/app/categories/output/category-output.ts"'},'import { FinalOutput, Output } from "@mongez/warlock";\n\nexport class CategoryOutput extends Output {\n  /**\n   * Output data\n   */\n  protected output: FinalOutput = {\n    id: "int",\n    name: "localized",\n  };\n}\n')),(0,o.kt)("p",null,"If ",(0,o.kt)("inlineCode",{parentName:"p"},"locale")," header is present in the request with value ",(0,o.kt)("inlineCode",{parentName:"p"},"en"),", then the output of the name will be:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "name": "Category name"\n}\n')),(0,o.kt)("p",null,"If not present then the entire array will be returned:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "name": [\n    {\n      "localeCode": "en",\n      "value": "Category name"\n    },\n    {\n      "localeCode": "ar",\n      "value": "\u0627\u0633\u0645 \u0627\u0644\u0642\u0633\u0645"\n    }\n  ]\n}\n')))}d.isMDXComponent=!0}}]);